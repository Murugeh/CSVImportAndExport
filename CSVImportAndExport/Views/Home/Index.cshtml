
@model Model.CustomerDetailsInfo
@{
    Layout = null;
}
@Styles.Render("~/Content/css")
@Scripts.Render("~/bundles/modernizr")
@Scripts.Render("~/Scripts/jquery-3.3.1.js")
@Scripts.Render("~/Scripts/jquery-3.3.1.min.js")
@Scripts.Render("~/Content/bootstrap.css")

<style>
    .exportbutton {
        float: right;
        margin-right: 65px;
    }
</style>

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
</head>

<body>
    @using (Html.BeginForm("Index", "Home", FormMethod.Post, new { enctype = "multipart/form-data" }))
    {
        <input type="file" name="postedFile" id="file" onchange="return fileValidation()" />
        @*<input type="submit" value="Import" style="margin-left:430px;margin-top:-22px" class="btn btn-success btn-xs" />*@
        <input type="submit" value="Upload" style="margin-left:430px;margin-top:-22px" class="btn btn-primary" onclick="return fileSubmitValidation()" />
        @*<input type="image" value="Import" style="margin-left:430px;margin-top:-22px"<img src="https://img.icons8.com/ios/50/000000/import-csv.png" alt="Submit"/>*@

    }
    @*@Html.ActionLink("Export", "ExportCSV_Customer", "Home", null, new { @class = "btn btn-primary" })*@
    <div class="col-md-12">
        <button onclick="location.href='@Url.Action("ExportCSV", "Home")';return false;" class="btn-primary exportbutton">Export To Csv</button>
    </div>

    <hr />
    <div class="table-responsive" style="overflow-x: hidden; overflow-y: hidden;">
        <table class="table table-striped table-bordered table-advance table-hover JColResizer" style="position:relative; float:left;">
            <thead class="thead-Light" style="background-color:lightblue">
                <tr>
                    <th style="font-weight:400">@Html.Label("CustomerName")</th>
                    <th style="font-weight:400">@Html.Label("City")</th>
                    <th style="font-weight:400">@Html.Label("State")</th>
                    <th style="font-weight:400">@Html.Label("Country")</th>
                </tr>
            </thead>
            @if (Model != null)
            {
                if (Model.CustomerInfo.Count() > 0)
                {
                    <tbody id="myTable">

                        @foreach (var customer in Model.CustomerInfo)
                        {
                            <tr>
                                <td> @Html.DisplayFor(modelItem => customer.CustomerName)</td>
                                <td> @Html.DisplayFor(modelItem => customer.City)</td>
                                <td> @Html.DisplayFor(modelItem => customer.State)</td>
                                <td> @Html.DisplayFor(modelItem => customer.Country)</td>
                            </tr>
                        }

                    </tbody>
                }
            }
        </table>
    </div>


</body>
</html>
<div class="pagination" style="margin-right: 10px; margin-bottom:0px;">
    Page @(Model.Pager.TotalPages < Model.Pager.CurrentPage ? 0 : Model.Pager.CurrentPage)
    of @Model.Pager.TotalPages
</div>
<div style="clear:both;"></div>

@if (Model.Pager.EndPage > 1)
{
    <ul class="pagination">
        @if (Model.Pager.CurrentPage > 1)
        {
            <li>
                <a href="~/Home/Index?page=1"><<</a>
            </li>
            <li>
                <a href="~/Home/Index?page=@(Model.Pager.CurrentPage - 1)"><</a>
            </li>
        }

        @for (var page = Model.Pager.StartPage; page <= Model.Pager.EndPage; page++)
        {
            <li class="@(page == Model.Pager.CurrentPage ? "active" : "")">
                <a href="~/Home/Index?page=@page">@page</a>
            </li>
        }

        @if (Model.Pager.CurrentPage < Model.Pager.TotalPages)
        {
            <li>
                <a href="~/Home/Index?page=@(Model.Pager.CurrentPage + 1)">></a>
            </li>
            <li>
                <a href="~/Home/Index?page=@(Model.Pager.TotalPages)">>></a>
            </li>
        }
    </ul>
}
    <script type="text/javascript">
        $(document).ready(function () {
            var success = @((TempData["FileUploadSuccess"] != null).ToString().ToLower());
            if (success == true) {
                alert('File Successfully Uploaded!');
            }
            else
            {
                var fail = @((TempData["Failure"] != null).ToString().ToLower());
                if (fail == true) {
                    alert('Error While Uploading a File');
                }
            }

            var Exportsuccess = @((TempData["ExportFail"] != null).ToString().ToLower());
            if (Exportsuccess == true) {
                alert('No Records to Export Data');
            }
        });
    function fileValidation() {
        var fileInput = document.getElementById('file');

        var filePath = fileInput.value;

        // Allowing file type
        var allowedExtensions =
            /(\.csv)$/i;

        if (!allowedExtensions.exec(filePath)) {
            alert('Invalid file. Please Select .csv Type');
            fileInput.value = '';
            return false;
        }
    }
    function fileSubmitValidation() {
        debugger;
        var fileInput = document.getElementById('file');
        var filePath = fileInput.value;
        if (filePath == "") {
            alert('Please Select File');
            return false;
        }

    }
    @*$(document).ready(function () {
        debugger;
        if ((@TempData["FileUploadSuccess"])!= null) {
        alert("Successfully Added.");
    }
       if ((@TempData["Failure"])!= null) {
        alert("Fail to Add.");
    }
    });*@


    </script>
